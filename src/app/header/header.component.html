<header class="en-tete">
  <div class="barre">

    <!-- Gauche : burger (mobile) + actions desktop -->
    <div class="left">
      <button class="burger" (click)="openMenu()" aria-label="Menu">
        <span></span><span></span><span></span>
      </button>

      <div class="actions-desktop">
        <ng-container *ngIf="isLoggedIn(); else desktopLogin">
          <!--          <span class="who">Salut, <strong>{{ userObj?.pseudo || userObj?.email }}</strong></span>-->
          <app-balance-header></app-balance-header>
          <button class="bouton bouton--danger" (click)="logout()">Se déconnecter</button>
        </ng-container>
        <ng-template #desktopLogin>
          <button class="bouton" [routerLink]="['/register']">S'inscrire</button>
          <!-- AVANT: (click)="isMenuOpen=true" ou routerLink -->
          <button class="bouton bouton--primaire" (click)="ui.openMenu()">Se connecter</button> <!-- ✅ -->
        </ng-template>
      </div>
    </div>
    <!-- Centre : logo -->
    <div class="center">
      <a [routerLink]="['/home']" class="logo">
        <img src="assets/images/logo.jpg" alt="EVALUX Casino" />
      </a>
    </div>

    <!-- Droite : bonus -->
    <!-- Droite : bonus (avec libellé & hint cliquable) -->
    <div class="right">
      <div class="bonus-cta">
        <button
          class="gift-btn"
          [class.available]="canClaim"
          [disabled]="!canClaim || bonusLoading"
          (click)="onClickGift()"
          [title]="giftTooltip || (canClaim ? 'Bonus disponible — clique pour le réclamer' : 'Bonus indisponible pour le moment')"
          [attr.aria-label]="giftTooltip || (canClaim ? 'Bonus disponible — cliquez pour le réclamer' : 'Bonus indisponible pour le moment')"
          aria-describedby="bonus-hint"
        >
          <!-- halo animé quand dispo -->
          <span class="ping" *ngIf="canClaim" aria-hidden="true"></span>

          <img src="assets/images/bonus.png" alt="Icône bonus" />

          <!-- badge 'Bonus' collé au bouton -->
          <span class="badge-bonus" aria-hidden="true">Bonus</span>
          <!-- libellé interne (mobile : visible, desktop : masqué) -->
          <span class="badge-bonus-text">Bonus</span>
        </button>
        <!-- Bouton Leaderboard -->




      </div>
      <a routerLink="/leaderboard" class="trophy-btn" title="Voir le classement">
      <img src="assets/images/leaderboard.png" alt="Classement" />
    </a>
    </div>
  </div>


    <!-- Toast -->
  <div *ngIf="bonusMsg" class="toast">{{ bonusMsg }}</div>
</header>
